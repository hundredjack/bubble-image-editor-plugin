{
  "plugin_info": {
    "name": "Image Editor Pro",
    "category": "visual elements",
    "description": "A minimalistic, embeddable image editor with canvas-based editing tools. Features brush, erase, move, crop, zoom, brightness/contrast adjustment, undo/redo, and webhook export. Perfect for image editing workflows in Bubble apps.",
    "author": "MiniMax Agent",
    "version": "1.0.0",
    "price": 0,
    "monthly_price": 0,
    "repo_url": "https://github.com/minimax-agent/bubble-image-editor-plugin",
    "demo_url": "https://lmqkf0940zey.space.minimax.io",
    "icon": "https://cdn.jsdelivr.net/gh/minimax-agent/bubble-image-editor-plugin@1.0.0/assets/icon.png"
  },
  "script_url": "https://cdn.jsdelivr.net/gh/minimax-agent/bubble-image-editor-plugin@1.0.0/dist/bubble-plugin.min.js",
  "elements": {
    "Image Editor Canvas": {
      "category": "visual elements",
      "can_fit_text": false,
      "resizable": true,
      "min_width": 300,
      "min_height": 200,
      "default_width": 800,
      "default_height": 600,
      "icon": "edit-2",
      "default_dim": {
        "width": 800,
        "height": 600
      },
      "fields": {
        "editor_url": {
          "caption": "Editor URL",
          "editor": "StaticText",
          "default_val": "https://nhmn9s06m5et.space.minimax.io",
          "rank": 0,
          "help": "URL of the deployed image editor application"
        },
        "webhook_url": {
          "caption": "Webhook URL",
          "editor": "DynamicValue",
          "value": "text",
          "rank": 1,
          "help": "HTTP endpoint to receive exported images"
        },
        "user_id": {
          "caption": "User ID",
          "editor": "DynamicValue",
          "value": "text", 
          "rank": 2,
          "help": "User identifier to associate with exported images"
        },
        "auto_load_on_start": {
          "caption": "Auto-load image on start",
          "editor": "Checkbox",
          "default_val": false,
          "rank": 3,
          "help": "Load image immediately when element becomes visible"
        },
        "show_toolbar": {
          "caption": "Show toolbar",
          "editor": "Checkbox", 
          "default_val": true,
          "rank": 4,
          "help": "Display the editing toolbar in the interface"
        },
        "enable_inpainting": {
          "caption": "Enable inpainting tool",
          "editor": "Checkbox",
          "default_val": false,
          "rank": 5,
          "help": "Show AI inpainting button (requires future API integration)"
        }
      },
      "states": {
        "is_loaded": {
          "caption": "Is loaded",
          "value": "boolean",
          "help": "True when iframe and editor are fully loaded and ready"
        },
        "is_modified": {
          "caption": "Is modified", 
          "value": "boolean",
          "help": "True when user has made edits to the current image"
        },
        "current_image_url": {
          "caption": "Current image URL",
          "value": "text",
          "help": "URL of the currently loaded image"
        },
        "current_user_id": {
          "caption": "Current user ID",
          "value": "text", 
          "help": "User ID associated with the current image"
        },
        "export_status": {
          "caption": "Export status",
          "value": "text",
          "help": "Status of last export: 'idle', 'exporting', 'success', or 'error'"
        },
        "error_message": {
          "caption": "Error message",
          "value": "text",
          "help": "Error message if something goes wrong"
        },
        "last_export_timestamp": {
          "caption": "Last export timestamp",
          "value": "date",
          "help": "Timestamp of the last successful export"
        }
      },
      "events": {
        "Editor loaded": {
          "caption": "Editor loaded",
          "help": "Triggered when the iframe and editor API are ready for use"
        },
        "Image loaded": {
          "caption": "Image loaded", 
          "help": "Triggered when an image is successfully loaded into the editor"
        },
        "Image modified": {
          "caption": "Image modified",
          "help": "Triggered when the user makes any edit to the image"
        },
        "Export started": {
          "caption": "Export started",
          "help": "Triggered when the export process begins"
        },
        "Export completed": {
          "caption": "Export completed",
          "help": "Triggered when the image is successfully exported to webhook"
        },
        "Export failed": {
          "caption": "Export failed", 
          "help": "Triggered when the export process fails"
        },
        "Editor error": {
          "caption": "Editor error",
          "help": "Triggered when any error occurs in the editor"
        }
      },
      "initialize": "initializeImageEditor",
      "update": "updateImageEditor",
      "reset": "resetImageEditor"
    }
  },
  "actions": {
    "Load image": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to load the image into"
        },
        "image_url": {
          "caption": "Image URL",
          "editor": "DynamicValue",
          "value": "text",
          "rank": 1,
          "help": "URL or base64 data of the image to load"
        },
        "user_id": {
          "caption": "User ID",
          "editor": "DynamicValue", 
          "value": "text",
          "rank": 2,
          "help": "User identifier to associate with this image"
        }
      },
      "action": "actionLoadImage"
    },
    "Export image": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to export from"
        },
        "webhook_url": {
          "caption": "Webhook URL (optional)",
          "editor": "DynamicValue",
          "value": "text",
          "rank": 1,
          "optional": true,
          "help": "Override the element's configured webhook URL"
        },
        "user_id": {
          "caption": "User ID (optional)",
          "editor": "DynamicValue",
          "value": "text", 
          "rank": 2,
          "optional": true,
          "help": "Override the element's configured user ID"
        }
      },
      "action": "actionExportImage"
    },
    "Reset canvas": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to reset"
        }
      },
      "action": "actionResetCanvas"
    },
    "Undo": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType", 
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to undo on"
        }
      },
      "action": "actionUndo"
    },
    "Redo": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas", 
          "rank": 0,
          "help": "The Image Editor Canvas element to redo on"
        }
      },
      "action": "actionRedo"
    },
    "Upload image file": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to upload the image to"
        },
        "user_id": {
          "caption": "User ID (optional)",
          "editor": "DynamicValue",
          "value": "text",
          "rank": 1,
          "optional": true,
          "help": "User identifier to associate with this image"
        }
      },
      "action": "actionUploadImageFile"
    },
    "Download edited image": {
      "category": "element actions",
      "expose": true,
      "fields": {
        "element": {
          "caption": "Element",
          "editor": "ElementOfType",
          "value": "Image Editor Canvas",
          "rank": 0,
          "help": "The Image Editor Canvas element to download from"
        },
        "filename": {
          "caption": "Filename (optional)",
          "editor": "DynamicValue",
          "value": "text",
          "rank": 1,
          "optional": true,
          "help": "Name for the downloaded file (default: 'edited-image.png')"
        }
      },
      "action": "actionDownloadEditedImage"
    }
  }
}
